[{"title":"微信小程序学习笔记","date":"2017-10-16T04:54:41.000Z","path":"2017/10/16/learn-wxapp-first/","content":"<h1 id=\"目录结构\"><a href=\"#目录结构\" class=\"headerlink\" title=\"目录结构\"></a>目录结构</h1><blockquote>\n<p>一个小程序的目录结构，包含app.js,app.json,app.wxss和pages,utils等文件<br>其中：<br>app.js为脚本文件，在这个文件中处理小程序的生命周期函数，申明全局变量，调用框架API和定义通用函数等。<br><a id=\"more\"></a><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//app.js</span></div><div class=\"line\">App(&#123;</div><div class=\"line\">  onLaunch: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//调用API从本地缓存中获取数据var logs = wx.getStorageSync('logs') || []</span></div><div class=\"line\">    logs.unshift(<span class=\"built_in\">Date</span>.now())</div><div class=\"line\">    wx.setStorageSync(<span class=\"string\">'logs'</span>, logs)</div><div class=\"line\">  &#125;,</div><div class=\"line\">  getUserInfo:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">cb</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.globalData.userInfo)&#123;</div><div class=\"line\">      <span class=\"keyword\">typeof</span> cb == <span class=\"string\">\"function\"</span> &amp;&amp; cb(<span class=\"keyword\">this</span>.globalData.userInfo)</div><div class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">      <span class=\"comment\">//调用登录接口</span></div><div class=\"line\">      wx.login(&#123;</div><div class=\"line\">        success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          wx.getUserInfo(&#123;</div><div class=\"line\">            success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</div><div class=\"line\">              that.globalData.userInfo = res.userInfo;</div><div class=\"line\">              <span class=\"keyword\">typeof</span> cb == <span class=\"string\">\"function\"</span> &amp;&amp; cb(that.globalData.userInfo)</div><div class=\"line\">            &#125;</div><div class=\"line\">          &#125;)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  globalData:&#123;</div><div class=\"line\">    userInfo:<span class=\"literal\">null</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n</blockquote>\n<p>app.json为小程序配置文件，可以配置小程序的页面组成，窗口背景色，导航条样式，默认标题等。注：不能添加任何注释。<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"pages\"</span>:[</div><div class=\"line\">    <span class=\"string\">\"pages/index/index\"</span>,</div><div class=\"line\">    <span class=\"string\">\"pages/logs/logs\"</span></div><div class=\"line\">  ],</div><div class=\"line\">  <span class=\"attr\">\"window\"</span>:&#123;</div><div class=\"line\">    <span class=\"attr\">\"backgroundTextStyle\"</span>:<span class=\"string\">\"light\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"navigationBarBackgroundColor\"</span>: <span class=\"string\">\"#fff\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"navigationBarTitleText\"</span>: <span class=\"string\">\"WeChat\"</span>,</div><div class=\"line\">    <span class=\"attr\">\"navigationBarTextStyle\"</span>:<span class=\"string\">\"black\"</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>app.wxss是整个小程序的公共样式表，我们可以像在css中定义class属性的样式一样使用app.wxss中声明的样式规则。</p>\n<h1 id=\"页面结构\"><a href=\"#页面结构\" class=\"headerlink\" title=\"页面结构\"></a>页面结构</h1><blockquote>\n<p>每一个小程序页面是由同路径下同名的四个不同后缀文件的组成，如：index.js、index.wxml、index.wxss、index.json。.js后缀的文件是脚本文件，.json后缀的文件是配置文件，.wxss后缀的是样式表文件，.wxml后缀的文件是页面结构文件。<br>*指定小程序的首页，默认app.json中的pages中的第一项为小程序的首页。</p>\n</blockquote>\n<p>总的来说，小程序由三个部分组成:配置，逻辑，和视图</p>\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><blockquote>\n<p><em>.json文件为配置文件，主要配置当前小程序的基本信息，比如tab，标题，背景，导航样式等信息。<br>其中，page.json为全局配置，在page中也有相应的.json,对于同属性配置页面级覆盖page.json<br>逻辑：\n</em>.js文件为逻辑层，逻辑层将数据进行处理后发送给视图层，同时接受视图层的事件反馈。 在 JavaScript 的基<br>础上，我们做了一些修改，以方便地开发小程序。</p>\n<pre><code>- 增加 App 和 Page 方法，进行程序和页面的注册。\n- 增加 getApp 和 getCurrentPages 方法，分别用来获取 App 实例和当前页面栈。\n- 提供丰富的 API，如微信用户数据，扫一扫，支付等微信特有能力。\n- 每个页面有独立的作用域，并提供模块化能力。\n- 由于框架并非运行在浏览器中，所以 JavaScript 在 web 中一些能力都无法使用，如 document，window 等。\n- 开发者写的所有代码最终将会打包成一份 JavaScript，并在小程序启动的时候运行，直到小程序销毁。类似 ServiceWorker，所以逻辑层也称之为 App Service。\n</code></pre><h1 id=\"视图\"><a href=\"#视图\" class=\"headerlink\" title=\"视图\"></a>视图</h1><p><em>.WXML 与 </em>.WXSS<br>框架的视图层由 WXML 与 WXSS 编写，由组件来进行展示。<br>将逻辑层的数据反应成视图，同时将视图层的事件发送给逻辑层。<br>WXML(WeiXin Markup language)用于描述页面的结构。<br>WXSS(WeiXin Style Sheet)用于描述页面的样式。<br>组件(Component)是视图的基本组成单元。</p>\n</blockquote>\n<h1 id=\"demo\"><a href=\"#demo\" class=\"headerlink\" title=\"demo\"></a>demo</h1><blockquote>\n<p><a href=\"https://github.com/dazjean/wx_webapp_demo\" target=\"_blank\" rel=\"external\">项目地址</a></p>\n</blockquote>\n","tags":[{"name":"-小程序","slug":"小程序","permalink":"//dazjean.github.io/tags/小程序/"}]},{"title":"javascript权威指南读书笔记—字符串","date":"2017-10-16T03:34:51.000Z","path":"2017/10/16/learn-javascript-string-note/","content":"<h1 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h1><blockquote>\n<p>javascript采用utf-16编码unicode字符集，js字符串则由一组无序号的16位值组成的序列。</p>\n</blockquote>\n<h1 id=\"字符串长度\"><a href=\"#字符串长度\" class=\"headerlink\" title=\"字符串长度\"></a>字符串长度</h1><blockquote>\n<p>字符串长度length等于组成字符串的16位值unicode序列的个数。空字符串的长度为0。<br>一些不能使用16位unicode表示的字符也遵循utf-16的编码规则；用两个16位的unicode组成一个序列。所以长度length等于2的字符串有可能表示的是一个unicode字符</p>\n</blockquote>\n<h1 id=\"字符串索引\"><a href=\"#字符串索引\" class=\"headerlink\" title=\"字符串索引\"></a>字符串索引</h1><blockquote>\n<p>字符串索引和数组一样，索引以0开始表示第一个位置，通过charAt（index）可以访问某个索引上表示的字符。</p>\n</blockquote>\n<h1 id=\"字符串直接量\"><a href=\"#字符串直接量\" class=\"headerlink\" title=\"字符串直接量\"></a>字符串直接量</h1><blockquote>\n<p>字符串直接量是单引号或者双引号括起来的字符序列。双引号或者单引号中可以包含单引号或者双引号<br><a id=\"more\"></a><br><strong>特性</strong></p>\n<ul>\n<li>es3中规定字符串直接量必须在一行中，eg:<figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">var s</span> = <span class=\"string\">'hello world'</span>;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>但在es5中支持多行，以‘\\’反斜杠链接；eg:<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">var</span> S = <span class=\"string\">'hello\\</span></div><div class=\"line\"><span class=\"string\">world'</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"字符串转义\"><a href=\"#字符串转义\" class=\"headerlink\" title=\"字符串转义\"></a>字符串转义</h1><blockquote>\n<p>在JavaScript中“\\”反斜杠有着特殊的用途，通常反斜杠后面加上一个字符，就不再标识本身的含义了，比如。\\n标识换行符。以下为JavaScript中定义的转义字符，如果\\没有位于以下字符前，那么会忽略\\</p>\n<ol>\n<li>\\0   nul字符 \\u0000 </li>\n<li>\\b   退格符 “dfsfdsfsfdfsf\b”</li>\n<li>\\t   水平制表符</li>\n<li>\\n   换行符</li>\n<li>\\v   垂直制表符 “dfsfdsfsfdfsf\u000b“</li>\n<li>\\f   换页符</li>\n<li>\\r   回车符</li>\n<li>\\”   双引号</li>\n<li>\\’   单引号</li>\n<li>\\   反斜杠</li>\n<li>\\xXX   由两位十六进制数XX组成的latin-1字符</li>\n<li>\\UXXXX  由四位十六进制数XXXX组成的unicode字符</li>\n</ol>\n</blockquote>\n<h1 id=\"字符串常用方法\"><a href=\"#字符串常用方法\" class=\"headerlink\" title=\"字符串常用方法\"></a>字符串常用方法</h1><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">var s = 'hello,word!'</div><div class=\"line\">s.charAr(<span class=\"number\">0</span>) <span class=\"comment\">//获取字符串第一个字符</span></div><div class=\"line\">s.substr(<span class=\"number\">1</span>,<span class=\"number\">4</span>)<span class=\"comment\">//获取字符串第一个字符到第5个字符</span></div><div class=\"line\">s.substring(<span class=\"number\">1</span>,<span class=\"number\">4</span>)<span class=\"comment\">// 截取字符串第2位到第四位的字符</span></div><div class=\"line\">s.slice(<span class=\"number\">1</span>,<span class=\"number\">4</span>) <span class=\"comment\">// 截取字符串第2位到第四位的字符 同上</span></div><div class=\"line\">s.slice(<span class=\"number\">-3</span>) <span class=\"comment\">// 负数倒叙，截取最后三位字符</span></div><div class=\"line\">s.split(',')<span class=\"comment\">// 分割成数组['hello','world!']</span></div><div class=\"line\">s.indexOf('l')<span class=\"comment\">//字符l首次出现的位置</span></div><div class=\"line\">s.lastIndexOf('l)<span class=\"comment\">//字符l最后一次出现的位置</span></div><div class=\"line\">s.replace('h',<span class=\"string\">\"H\"</span>)<span class=\"comment\">//字符串匹配替换，全文</span></div><div class=\"line\">s.toUppperCase()<span class=\"comment\">//转化成大写字母</span></div><div class=\"line\">s.toLocaleLowerCase/toLowerCase <span class=\"comment\">//转化成小写，locale只有少数本地语言下有特定的大小写映射（土耳其）</span></div></pre></td></tr></table></figure>","tags":[{"name":"-JavaScript","slug":"JavaScript","permalink":"//dazjean.github.io/tags/JavaScript/"}]}]